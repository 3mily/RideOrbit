<div id="pending-passengers">
  <% @user.drivercommutes.each_with_index do |commute,index| %>
  <div class="panel">
  <p> Commute Number : <%= index+1 %>
   <p> From <%= commute.origin_name%> To <%= commute.destination_name%> </p>
   <% if commute.requests.empty? %>
     Pending Requests From Passengers: None
   <% else %>
    <% commute.requests.each do |request|%>
      <% if request.approved_at.nil? && request.rejected_at.nil? %>
         Pending Requests From Passengers: 
        <%= link_to "Passenger Profile", "/users/#{request.initiated_by_id}" %>
        <button class="accept" data-driver-id="<%=request.initiated_by_id%>" data-request-id= "<%=request.id%>" data-passenger-id="<%=@user.id%>" data-passenger-commute-id="<%=request.passengercommute_id%>" data-driver-commute-id="<%=request.drivercommute_id%>">Accept</button>
        <button class="decline">Decline</button>
      <% elsif request.approved_at %>
        <button><%= link_to "Passenger", "/users/#{commute.passenger}" %></button>
        <button class="disconnect">Drop Passenger</button>
      <% elsif request.rejected_at %>
        <% @rejected_requests+=1 %>
      <% end %>
    <% if @rejected_requests == commute.requests.length %>
      Pending Requests From Passengers: None
    <% end %> 
    <% end %> 
   <% end %>
   </div>
  <% end %>
</div>